{"Version":"2019-10-30","StartAction":"12ec50e7-dcdf-4968-b07f-070bd4526fe1","Metadata":{"entryPointPosition":{"x":-520,"y":-3.2},"ActionMetadata":{"85bf4ebf-1bd3-425a-ad86-7528f7d38be3":{"position":{"x":1409.6000000000001,"y":-263.2}},"9f676c27-013d-4a20-91da-59a60e2b1aee":{"position":{"x":1764.8000000000002,"y":120.80000000000001},"parameters":{"ContactFlowId":{"displayName":"sianth talk to an expert flow"}},"ContactFlow":{"text":"sianth talk to an expert flow"}},"f07f598e-9278-4214-8afe-fcb7d058da53":{"position":{"x":1675.2,"y":-240},"parameters":{"ContactFlowId":{"displayName":"sianth completed orders flow"}},"ContactFlow":{"text":"sianth completed orders flow"}},"ea07abe6-2a25-4257-a6fb-f0a053fc376f":{"position":{"x":1718.4,"y":-60.800000000000004},"parameters":{"ContactFlowId":{"displayName":"sianth in progress orders flow"}},"ContactFlow":{"text":"sianth in progress orders flow"}},"ceda1660-751d-4c6c-ad3d-10801e92607e":{"position":{"x":1196,"y":-287.2},"conditionMetadata":[{"id":"6da9e980-a12f-4fda-baa2-e7f343932138","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"0"}]},"2ff1e135-b34a-4434-85ab-cf1d7ea567f6":{"position":{"x":526.4,"y":-6.4},"parameters":{"LambdaFunctionARN":{"displayName":"searchMemberByPhone"},"LambdaInvocationAttributes":{"customer_number":{"useDynamic":true}}},"dynamicMetadata":{"customer_number":true}},"35122585-e97a-4545-876a-aa5cac030f0b":{"position":{"x":1404.8000000000002,"y":-36},"conditionMetadata":[{"id":"dd3ee67b-b4d8-4f40-b785-0ca7ce58ebda","value":"1"},{"id":"06258564-d106-40d5-b0d4-875755332bb0","value":"2"},{"id":"e36dad85-40c7-4ec8-a84c-b1ecbf2bf90d","value":"3"}]},"5870a85a-553c-4508-a475-49f8c06a6e39":{"position":{"x":1158.4,"y":322.40000000000003}},"d56b0423-282f-46af-afa5-aaa9bf100018":{"position":{"x":791.2,"y":7.2},"conditionMetadata":[{"id":"c9e3d4e3-bd9d-4f21-a99e-51acda39b35d","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"true"}]},"929f1dc4-fc61-4c19-8103-9c5aad0fdede":{"position":{"x":1920.8000000000002,"y":543.2}},"241b3a49-87a2-48f0-a49d-62c15d3687cf":{"position":{"x":819.2,"y":350.40000000000003},"parameters":{"ContactFlowId":{"displayName":"sianth member flow"}},"ContactFlow":{"text":"sianth member flow"}},"590a6780-171f-48dc-a57d-a3d688d8c6d6":{"position":{"x":284,"y":267.2}},"142b87fe-60a7-4b71-b631-fbb59733f537":{"position":{"x":956.8000000000001,"y":-284.8},"conditionMetadata":[{"id":"8ba0830e-1da6-49e0-8f17-dd43ec53ce1d","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"0"}]},"f1f80179-9040-4867-a8a9-b3ad9070222f":{"position":{"x":299.2,"y":-10.4},"parameters":{"Attributes":{"customer_number":{"useDynamic":true}}},"dynamicParams":["customer_number"]},"f501b39c-3bbb-4b1d-8ac8-3eb72b785127":{"position":{"x":32,"y":1.6},"conditionMetadata":[{"id":"f03e0aa9-0d32-4791-ac4f-1c5eef4d2457","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"false"},{"id":"b5faa083-ec5b-49dc-bd48-3e72952bba33","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"true"}]},"278e6190-ad1a-4743-bd88-90134b4a1c5b":{"position":{"x":-192.8,"y":-20.8},"parameters":{"LambdaFunctionARN":{"displayName":"checkCustomerAttributes"},"LambdaInvocationAttributes":{"customer_member_number":{"useDynamic":true}}},"dynamicMetadata":{"customer_member_number":true}},"12ec50e7-dcdf-4968-b07f-070bd4526fe1":{"position":{"x":-417.6,"y":-16.8}}},"name":"sianth main flow","description":"","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{"Text":"Welcome $.External.customer_name. \n"},"Identifier":"85bf4ebf-1bd3-425a-ad86-7528f7d38be3","Type":"MessageParticipant","Transitions":{"NextAction":"9f676c27-013d-4a20-91da-59a60e2b1aee","Errors":[{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ContactFlowId":"arn:aws:connect:us-west-2:232154061460:instance/4afffe99-5005-4677-a2e4-a5c4c791e6bf/contact-flow/2f4b2a8b-6522-424e-8876-92baf0009ea9"},"Identifier":"9f676c27-013d-4a20-91da-59a60e2b1aee","Type":"TransferToFlow","Transitions":{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","Errors":[{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ContactFlowId":"arn:aws:connect:us-west-2:232154061460:instance/4afffe99-5005-4677-a2e4-a5c4c791e6bf/contact-flow/92852ec5-c2dc-4ae6-8b40-331209c37948"},"Identifier":"f07f598e-9278-4214-8afe-fcb7d058da53","Type":"TransferToFlow","Transitions":{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","Errors":[{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ContactFlowId":"arn:aws:connect:us-west-2:232154061460:instance/4afffe99-5005-4677-a2e4-a5c4c791e6bf/contact-flow/85a07f47-6428-4304-bb01-b4612553f237"},"Identifier":"ea07abe6-2a25-4257-a6fb-f0a053fc376f","Type":"TransferToFlow","Transitions":{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","Errors":[{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.External.total_inprogress_orders"},"Identifier":"ceda1660-751d-4c6c-ad3d-10801e92607e","Type":"Compare","Transitions":{"NextAction":"35122585-e97a-4545-876a-aa5cac030f0b","Conditions":[{"NextAction":"85bf4ebf-1bd3-425a-ad86-7528f7d38be3","Condition":{"Operator":"Equals","Operands":["0"]}}],"Errors":[{"NextAction":"35122585-e97a-4545-876a-aa5cac030f0b","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-west-2:232154061460:function:searchMemberByPhone","InvocationTimeLimitSeconds":"3","LambdaInvocationAttributes":{"customer_number":"$.Attributes.customer_number"}},"Identifier":"2ff1e135-b34a-4434-85ab-cf1d7ea567f6","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"d56b0423-282f-46af-afa5-aaa9bf100018","Errors":[{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","ErrorType":"NoMatchingError"}]}},{"Parameters":{"StoreInput":"False","InputTimeLimitSeconds":"28","Text":"Welcome $.External.customer_name, I see you have  $.External.total_completed_orders completed orders and $.External.total_inprogress_orders in progress orders. Press 1 if you want to know more about your completed or previous orders. Press 2 to know more about the orders in progress. Press 3 to talk to an expert.\n"},"Identifier":"35122585-e97a-4545-876a-aa5cac030f0b","Type":"GetParticipantInput","Transitions":{"NextAction":"5870a85a-553c-4508-a475-49f8c06a6e39","Conditions":[{"NextAction":"f07f598e-9278-4214-8afe-fcb7d058da53","Condition":{"Operator":"Equals","Operands":["1"]}},{"NextAction":"ea07abe6-2a25-4257-a6fb-f0a053fc376f","Condition":{"Operator":"Equals","Operands":["2"]}},{"NextAction":"9f676c27-013d-4a20-91da-59a60e2b1aee","Condition":{"Operator":"Equals","Operands":["3"]}}],"Errors":[{"NextAction":"5870a85a-553c-4508-a475-49f8c06a6e39","ErrorType":"InputTimeLimitExceeded"},{"NextAction":"5870a85a-553c-4508-a475-49f8c06a6e39","ErrorType":"NoMatchingCondition"},{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Sorry, that's not a valid option. "},"Identifier":"5870a85a-553c-4508-a475-49f8c06a6e39","Type":"MessageParticipant","Transitions":{"NextAction":"35122585-e97a-4545-876a-aa5cac030f0b","Errors":[{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.External.flag"},"Identifier":"d56b0423-282f-46af-afa5-aaa9bf100018","Type":"Compare","Transitions":{"NextAction":"241b3a49-87a2-48f0-a49d-62c15d3687cf","Conditions":[{"NextAction":"142b87fe-60a7-4b71-b631-fbb59733f537","Condition":{"Operator":"Equals","Operands":["true"]}}],"Errors":[{"NextAction":"241b3a49-87a2-48f0-a49d-62c15d3687cf","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{},"Identifier":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"ContactFlowId":"arn:aws:connect:us-west-2:232154061460:instance/4afffe99-5005-4677-a2e4-a5c4c791e6bf/contact-flow/61f11c87-f369-427c-9a40-45a165ec98df"},"Identifier":"241b3a49-87a2-48f0-a49d-62c15d3687cf","Type":"TransferToFlow","Transitions":{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","Errors":[{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"590a6780-171f-48dc-a57d-a3d688d8c6d6","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"ComparisonValue":"$.External.total_completed_orders"},"Identifier":"142b87fe-60a7-4b71-b631-fbb59733f537","Type":"Compare","Transitions":{"NextAction":"35122585-e97a-4545-876a-aa5cac030f0b","Conditions":[{"NextAction":"ceda1660-751d-4c6c-ad3d-10801e92607e","Condition":{"Operator":"Equals","Operands":["0"]}}],"Errors":[{"NextAction":"35122585-e97a-4545-876a-aa5cac030f0b","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Attributes":{"customer_number":"$.CustomerEndpoint.Address"}},"Identifier":"f1f80179-9040-4867-a8a9-b3ad9070222f","Type":"UpdateContactAttributes","Transitions":{"NextAction":"2ff1e135-b34a-4434-85ab-cf1d7ea567f6","Errors":[{"NextAction":"929f1dc4-fc61-4c19-8103-9c5aad0fdede","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.External.flag"},"Identifier":"f501b39c-3bbb-4b1d-8ac8-3eb72b785127","Type":"Compare","Transitions":{"NextAction":"590a6780-171f-48dc-a57d-a3d688d8c6d6","Conditions":[{"NextAction":"f1f80179-9040-4867-a8a9-b3ad9070222f","Condition":{"Operator":"Equals","Operands":["false"]}},{"NextAction":"142b87fe-60a7-4b71-b631-fbb59733f537","Condition":{"Operator":"Equals","Operands":["true"]}}],"Errors":[{"NextAction":"590a6780-171f-48dc-a57d-a3d688d8c6d6","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-west-2:232154061460:function:checkCustomerAttributes","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"customer_member_number":"$.Attributes.$.Attributes.customer_member_number"}},"Identifier":"278e6190-ad1a-4743-bd88-90134b4a1c5b","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"f501b39c-3bbb-4b1d-8ac8-3eb72b785127","Errors":[{"NextAction":"590a6780-171f-48dc-a57d-a3d688d8c6d6","ErrorType":"NoMatchingError"}]}},{"Parameters":{"RecordingBehavior":{"RecordedParticipants":["Agent","Customer"]},"AnalyticsBehavior":{"Enabled":"True","AnalyticsLanguage":"en-US","AnalyticsRedactionBehavior":"Enabled","AnalyticsRedactionResults":"RedactedAndOriginal","AnalyticsRedactionMaskMode":"PII","ChannelConfiguration":{"Chat":{"AnalyticsModes":[]},"Voice":{"AnalyticsModes":["PostContact"]}}}},"Identifier":"12ec50e7-dcdf-4968-b07f-070bd4526fe1","Type":"UpdateContactRecordingBehavior","Transitions":{"NextAction":"278e6190-ad1a-4743-bd88-90134b4a1c5b"}}]}